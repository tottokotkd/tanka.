<!-- index用の記述をしている状態でshow画面を開くとエラーになり、show用の記述をしている状態でshow画面を開くとエラーになる。 -->
<!-- indexのコンテンツ一覧の並び順が、お気に入りの数の変動で変わってしまう。 -->
<!-- index用のパーシャル画面 -->

<div  id="like_area">
  <% posts.each do |post| %>
    <div class="post-content">
      <h2><%= link_to post.content, post_path(post.id) %></h2>
    </div>

    <div class="post-info">
      <ul>
        <li><%= link_to post.user.name, user_path(post.user.id) %></li>
        <li><%= simple_time(post.created_at) %></li>
      </ul>
    </div>

    <div class="like-area col-md-offset-4 col-md-8 col-sm-offset-2 col-sm-10">
      <% if post.like_user(current_user.id) %>
        <%= link_to post_like_path(post.like_user(current_user.id).id, post_id: post.id), id: "like-btn", method: :delete, remote: true do %>
          <span class="fa fa-heart like-btn"></span>
        <% end %>
      <% else %>
        <%= link_to post_likes_path(post_id: post.id), id: "like-btn", method: :post, remote: true do %>
          <span class="fa fa-heart like-btn-unlike"></span>
        <% end %>
      <% end %>

      <span id="like-count"><%= "#{post.likes.count}人のお気に入り" if post.likes.count > 0 %></span>

      <div id="like-users" class="like-box white-shadow">
        <p>お気に入り登録したユーザー</p>
        <% post.like_users.each do |like_user| %>
          <ul>
            <li>
              <%= link_to like_user.name, user_path(like_user.id) %>
            </li>
          </ul>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<!-- show用のパーシャル画面 -->

  <!--<div id="like_area" class="like-area col-md-offset-4 col-md-8 col-sm-offset-2 col-sm-10">-->
  <!--  <%# if post.like_user(current_user.id) %>-->
  <!--    <%#= link_to post_like_path(post.like_user(current_user.id).id, post_id: post.id), id: "like-btn", method: :delete, remote: true do %>-->
  <!--      <span class="fa fa-heart like-btn"></span>-->
  <!--    <%# end %>-->
  <!--  <%# else %>-->
  <!--    <%#= link_to post_likes_path(post_id: post.id), id: "like-btn", method: :post, remote: true do %>-->
  <!--      <span class="fa fa-heart like-btn-unlike"></span>-->
  <!--    <%# end %>-->
  <!--  <%# end %>-->
  <!--  <span id="like-count"><%#= "#{post.likes.count}人のお気に入り" if post.likes.count > 0 %></span>-->
  <!--  <div id="like-users" class="like-box white-shadow">-->
  <!--    <p>お気に入り登録したユーザー</p>-->
  <!--    <%# post.like_users.each do |like_user| %>-->
  <!--      <ul>-->
  <!--        <li>-->
  <!--          <%#= link_to like_user.name, user_path(like_user.id) %>-->
  <!--        </li>-->
  <!--      </ul>-->
  <!--    <%# end %>-->
  <!--  </div>-->
  <!--</div>-->


<script>
 $(function(){
   $('#like-count').on('click', function(){
     $('#like-users').slideToggle(400);
   });
 });
</script>